<!doctype html>
<html class="docs-version-current" lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="ActiveJ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="ActiveJ Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-176574648-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-176574648-1",{})</script><title data-react-helmet="true">ActiveJ Inject Advanced | é—ªç”µèˆ¬çš„é€Ÿåº¦å’Œæœ€ç»ˆå¼ºå¤§çš„ä¾èµ–æ€§æ³¨å…¥Javaåº“ | ActiveJ</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://activej.io/zh/img/preview.png"><meta data-react-helmet="true" name="twitter:image" content="https://activej.io/zh/img/preview.png"><meta data-react-helmet="true" property="og:url" content="https://activej.io/zh/inject/advanced"><meta data-react-helmet="true" name="docusaurus_locale" content="zh"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ActiveJ Inject Advanced | é—ªç”µèˆ¬çš„é€Ÿåº¦å’Œæœ€ç»ˆå¼ºå¤§çš„ä¾èµ–æ€§æ³¨å…¥Javaåº“ | ActiveJ"><meta data-react-helmet="true" name="description" content="å…·æœ‰å¼ºå¤§å·¥å…·çš„æè½»é‡çº§DI - æ”¯æŒåµŒå¥—ä½œç”¨åŸŸã€å•å­å’Œç¬æ—¶ç»‘å®šã€æ¨¡å—ã€å¤šçº¿ç¨‹å’Œå•çº¿ç¨‹æ³¨å…¥å™¨"><meta data-react-helmet="true" property="og:description" content="å…·æœ‰å¼ºå¤§å·¥å…·çš„æè½»é‡çº§DI - æ”¯æŒåµŒå¥—ä½œç”¨åŸŸã€å•å­å’Œç¬æ—¶ç»‘å®šã€æ¨¡å—ã€å¤šçº¿ç¨‹å’Œå•çº¿ç¨‹æ³¨å…¥å™¨"><meta data-react-helmet="true" name="keywords" content="di,ä¾èµ–æ€§æ³¨å…¥,å‰æ–¯æ›¿ä»£ç‰©,spring di,spring é€‰æ‹©,äºŒåŸºå‡†,java,java di,javaä¾èµ–æ€§æ³¨å…¥,JAVAæ¡†æ¶"><link data-react-helmet="true" rel="shortcut icon" href="/zh/./img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://activej.io/zh/inject/advanced"><link data-react-helmet="true" rel="alternate" href="https://activej.io/inject/advanced" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://activej.io/zh/inject/advanced" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://activej.io/ru/inject/advanced" hreflang="ru"><link data-react-helmet="true" rel="alternate" href="https://activej.io/inject/advanced" hreflang="x-default"><link rel="stylesheet" href="/zh/assets/css/styles.cd595f84.css">
<link rel="preload" href="/zh/assets/js/runtime~main.1dae9580.js" as="script">
<link rel="preload" href="/zh/assets/js/main.421114b9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><img src="/zh/./img/logo.webp" alt="Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/zh/./img/logo.webp" alt="Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">ActiveJ</b></a><a class="navbar__item navbar__link navbar__link--active" href="/zh/overview">æ–‡ä»¶</a><a class="navbar__item navbar__link" href="/zh/tutorials/getting-started">æ•™ç¨‹</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>ä¸­æ–‡ (machine translation)</span></span></a><ul class="dropdown__menu"><li><a href="/inject/advanced" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/zh/inject/advanced" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">ä¸­æ–‡ (machine translation)</a></li><li><a href="/ru/inject/advanced" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">Ğ ÑƒÑÑĞºĞ¸Ğ¹ (machine translation)</a></li></ul></div><a class="navbar__item navbar__link" href="/zh/blog">åšå®¢</a><a href="https://github.com/activej/activej" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/zh/overview">æ¦‚è¿°</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">å¼‚æ­¥I/O</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">é´å­</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">HTTP</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">æ³¨å…¥</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh/inject">æ¦‚è¿°</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh/inject/quick-start">å¿«é€Ÿå¯åŠ¨</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh/inject/injecting-instances">æ³¨å…¥å®ä¾‹</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh/inject/class-scanning">ç±»åˆ«æ‰«æ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh/inject/binding-transformations">ç»‘å®šè½¬æ¢</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh/inject/basic">åŸºæœ¬</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/inject/advanced">é«˜çº§</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh/inject/benchmarks">åŸºå‡†</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh/inject/examples">å®ä¾‹</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ç¼–ç åŸºå› </a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ä¸²è¡Œå™¨</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ä¸“ä¸šäººå‘˜</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">RPC</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">é›‡å‘˜</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">æ‚é¡¹</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">åœ¨è¿™ä¸€é¡µ</button></div><div class="theme-doc-markdown markdown"><header><h1>é«˜çº§</h1></header><p>åœ¨ <a href="/zh/inject/basic">ä¸Šä¸€éƒ¨åˆ†</a> ï¼Œæˆ‘ä»¬æ¢è®¨äº†ä¾èµ–æ³¨å…¥æ¦‚å¿µçš„ä¸€äº›å¸¸è§åŸåˆ™å’Œ ActiveJ InjectåŠŸèƒ½ã€‚ åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†è¿›è¡Œæ›´é«˜çº§ã€æ›´å¤æ‚çš„ActiveJ Injectä½¿ç”¨æ¡ˆä¾‹ã€‚</p><p>ä½ å¯ä»¥åœ¨ä»¥ä¸‹ç½‘ç«™æ‰¾åˆ°å®Œæ•´çš„ä¾‹å­æ¥æº <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/inject-2" target="_blank">GitHub</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="di-å¤šç”¨é€”å¤¹å­"></a>DI å¤šç”¨é€”å¤¹å­<a class="hash-link" href="#di-å¤šç”¨é€”å¤¹å­" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">#</a></h2><a href="https://github.com/activej/activej/blob/v5.0-beta2/core-inject/src/main/java/io/activej/inject/binding/Multibinder.java" target="_blank">Multibinder</a> å¦‚æœä¸€ä¸ªé”®æœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„ç»‘å®šï¼Œåˆ™è§£å†³ç»‘å®šå†²çªã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªHTTPæœåŠ¡å™¨ï¼Œå®ƒç”±ä¸¤ä¸ª <a href="https://github.com/activej/activej/blob/v5.0-beta2/core-inject/src/main/java/io/activej/inject/module/AbstractModule.java" target="_blank">AbstractModule</a>ã€‚ è¿™ä¸¤ä¸ªæ¨¡å—éƒ½åŒ…æ‹¬2ä¸ªç›¸äº’å†²çªçš„é”®ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸åŒçš„æ–¹å¼æ¥æä¾›å¤šé‡ç»‘å®šã€‚<p>åœ¨ç¬¬ä¸€ä¸ªservlet <code>AbstractModule</code>ï¼Œæˆ‘ä»¬é€šè¿‡è¦†ç›– <code>configure()</code> æ–¹æ³•ï¼Œä¸º <code>String</code> å’Œ <a href="https://github.com/activej/activej/blob/v5.0-beta2/core-http/src/main/java/io/activej/http/AsyncServlet.java" target="_blank">AsyncServlet</a> çš„æ˜ å°„æä¾›å¤šé‡ç»‘å®šã€‚ æˆ‘ä»¬ä½¿ç”¨ <code>multibindToMap</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸ºæ‰€æä¾›çš„ å†²çªçš„ç»‘å®šåœ°å›¾è¿”å›ä¸€ä¸ªç»‘å®šåœ°å›¾ã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">static class ServletMapsModule extends AbstractModule {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  protected void configure() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    multibindToMap(String.class, AsyncServlet.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Provides</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Map&lt;String, AsyncServlet&gt; firstPage() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return singletonMap(&quot;/first&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        request -&gt; HttpResponse.ok200().withPlainText(&quot;Hello from first page!&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Provides</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Map&lt;String, AsyncServlet&gt; lastPage() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return singletonMap(&quot;/last&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        request -&gt; HttpResponse.ok200().withPlainText(&quot;Hello from last page!&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @ProvidesIntoSet</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  AsyncServlet primary(Map&lt;String, AsyncServlet&gt; initializers) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    RoutingServlet routingServlet = RoutingServlet.create();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    initializers.forEach(routingServlet::map);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return routingServlet;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>æ³¨æ„ï¼Œ <em>ï¼Œä¸»è¦çš„</em> servletè¢«æ ‡è®°ä¸º <a href="https://github.com/activej/activej/blob/v5.0-beta2/core-inject/src/main/java/io/activej/inject/annotation/ProvidesIntoSet.java" target="_blank">@ProvidesIntoSet</a> æ³¨é‡Šã€‚ æˆ‘ä»¬ä»¥åå°†ä½¿ç”¨è¿™ä¸ªã€‚
åœ¨ç¬¬äºŒä¸ªservletæ¨¡å—ä¸­ï¼Œæˆ‘ä»¬å°†ç”¨å†…ç½®çš„ <code>@ProvidesIntoSet</code> æ³¨é‡Šæ¥è‡ªåŠ¨è®¾ç½®å¤šé‡ç»‘å®šã€‚ è¯¥æ³¨è§£ä»¥å•å­é›†çš„å½¢å¼æä¾›ç»“æœï¼Œç„¶åå°†å…¶æä¾›ç»™æˆ‘ä»¬çš„ <em>ä¸»è¦çš„</em> <strong>AsyncServlet</strong>ã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">static class ServletInitializersModule extends AbstractModule {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @ProvidesIntoSet</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Consumer&lt;RoutingServlet&gt; firstPage() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return routingServlet -&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        routingServlet.map(&quot;/first&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            request -&gt; HttpResponse.ok200().withPlainText(&quot;Hello from first page!&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @ProvidesIntoSet</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Consumer&lt;RoutingServlet&gt; lastPage() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return routingServlet -&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        routingServlet.map(&quot;/last&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            request -&gt; HttpResponse.ok200().withPlainText(&quot;Hello from last page!&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @ProvidesIntoSet</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  AsyncServlet primary(Set&lt;Consumer&lt;RoutingServlet&gt;&gt; initializers) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    RoutingServlet routingServlet = RoutingServlet.create();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    initializers.forEach(initializer -&gt; initializer.accept(routingServlet));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return routingServlet;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰çš„æ¨¡å—æ‹‰åˆ°ä¸€èµ·ã€‚ è¿˜è®°å¾—æˆ‘ä»¬ç”¨ <code>@ProvidesIntoSet</code> æ³¨è§£æ ‡è®°äº† <em>åˆçº§</em> servletså—ï¼Ÿ ç°åœ¨æˆ‘ä»¬å¯ä»¥ç®€å•åœ°åˆå¹¶ï¼Œç„¶åä½¿ç”¨ <a href="https://github.com/activej/activej/blob/v5.0-beta2/core-inject/src/main/java/io/activej/inject/Injector.java" target="_blank">Injector</a>.of()ç¼–è¯‘å®ƒä»¬ã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public static void main(String[] args) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Injector injector = Injector.of(new ServletMapsModule(), new ServletInitializersModule());</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  String s = injector.getInstance(new Key&lt;Set&lt;AsyncServlet&gt;&gt;() {}).toString();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  System.out.println(s);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>ä½ å¯ä»¥åœ¨ä»¥ä¸‹ç½‘ç«™ä¸Šæ‰¾åˆ°å®ä¾‹æ¥æº <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/inject-2/src/main/java/MultibinderExample.java" target="_blank">GitHub</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="å®ä¾‹æ³¨å…¥å™¨"></a>å®ä¾‹æ³¨å…¥å™¨<a class="hash-link" href="#å®ä¾‹æ³¨å…¥å™¨" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">#</a></h2><p><strong><a href="https://github.com/activej/activej/blob/v5.0-beta2/core-inject/src/main/java/io/activej/inject/InstanceInjector.java" target="_blank">InstanceInjector</a></strong> å¯ä»¥å°†å®ä¾‹æ³¨å…¥åˆ° <code>@Inject</code> ä¸€äº›å·²ç»å­˜åœ¨çš„å¯¹è±¡çš„å­—æ®µå’Œæ–¹æ³•ã€‚ è€ƒè™‘ä¸€ä¸‹è¿™ä¸ªç®€å•çš„ä¾‹å­ã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">@Inject</span></span><span class="token-line" style="color:#393A34"><span class="token plain">String message;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Provides</span></span><span class="token-line" style="color:#393A34"><span class="token plain">String message() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return &quot;Hello, world!&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">protected void run() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  System.out.println(message);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public static void main(String[] args) throws Exception {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Launcher launcher = new InstanceInjectorExample();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  launcher.launch(args);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>å¯èƒ½ä¼šå›°æ‰°ä½ çš„é—®é¢˜æ˜¯-- <a href="https://github.com/activej/activej/blob/v5.0-beta2/launcher/src/main/java/io/activej/launcher/Launcher.java" target="_blank">Launcher</a> ï¼Œå®é™…ä¸Šå¦‚ä½•çŸ¥é“æ¶ˆæ¯å˜é‡åŒ…å« <code>&quot;Hello, world!&quot;</code> å­—ç¬¦ä¸²ï¼Œä»¥ä¾¿åœ¨ <code>run()</code> æ–¹æ³•ä¸­æ˜¾ç¤ºå®ƒï¼Ÿ
åœ¨è¿™é‡Œï¼Œåœ¨DIçš„å†…éƒ¨å·¥ä½œä¸­ï¼Œ <strong>InstanceInjector</strong> ï¼Œå®é™…ä¸Šæ˜¯ç»™å‘å°„å™¨æä¾›äº†å¸®åŠ©ã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">private void postInjectInstances(String[] args) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Injector injector = this.createInjector(args);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  InstanceInjector&lt;Launcher&gt; instanceInjector = injector.getInstanceInjector(Launcher.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  instanceInjector.injectInto(this);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><ul><li><code>createInjector</code> ç”¨ç»™å®šçš„å‚æ•°äº§ç”Ÿ <em>injector</em>ã€‚</li><li><code>instanceInjector</code> ä» <em>injector</em>è·å¾—æ‰€æœ‰éœ€è¦çš„æ•°æ®ã€‚</li><li><code>injectInto</code> å°†æ•°æ®æ³¨å…¥æˆ‘ä»¬çš„ç©ºå®ä¾‹ä¸­ã€‚
ä½ å¯ä»¥åœ¨ä»¥ä¸‹ç½‘ç«™ä¸Šæ‰¾åˆ°å®ä¾‹æ¥æº <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/inject-2/src/main/java/InstanceInjectorExample.java" target="_blank">GitHub</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="ç»‘å®šç”Ÿæˆå™¨"></a>ç»‘å®šç”Ÿæˆå™¨<a class="hash-link" href="#ç»‘å®šç”Ÿæˆå™¨" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">#</a></h2><p>è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹Cookiesçš„ä¾‹å­å§ï¼ <a href="/zh/inject/examples">å‰ä¸€éƒ¨åˆ†</a>ã€‚ è¿™æ¬¡æˆ‘ä»¬æœ‰ç›¸åŒçš„POJOæˆåˆ†ï¼Œä½†ç°åœ¨æˆ‘ä»¬çš„cookieæ˜¯ä¸€ä¸ªé€šç”¨çš„ <strong>Cookie&lt;T&gt;</strong> ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªå­—æ®µ <strong>Optional&lt;T&gt; pastry</strong>ã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">static class Cookie&lt;T&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private final Optional&lt;T&gt; pastry;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Inject</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Cookie(Optional&lt;T&gt; pastry) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.pastry = pastry;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public Optional&lt;T&gt; getPastry() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return pastry;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <strong>AbstractModule</strong> <em>cookbook</em> å¹¶é‡å†™å…¶ <code>configure()</code> æ–¹æ³•ã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">AbstractModule cookbook = new AbstractModule() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  protected void configure() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // note (1)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    generate(Optional.class, (bindings, scope, key) -&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      Binding&lt;Object&gt; binding = bindings.get(key.getTypeParameter(0));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      return binding != null ?</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          binding.mapInstance(Optional::of) :</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          Binding.toInstance(Optional.empty());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bind(new Key&lt;Cookie&lt;Pastry&gt;&gt;() {});</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p><code>generate()</code> ä¸ºæœ¬æ¨¡å—æ·»åŠ ä¸€ä¸ªç»™å®šç±»çš„ <a href="https://github.com/activej/activej/blob/v5.0-beta2/core-inject/src/main/java/io/activej/inject/binding/BindingGenerator.java" target="_blank">BindingGenerator</a> ï¼Œæœ¬ä¾‹ä¸­æ˜¯ä¸€ä¸ª <strong>å¯é€‰çš„</strong>ã€‚ <strong>BindingGenerator</strong> åœ¨ <strong>Injector</strong> ç¼–è¯‘æœ€ç»ˆçš„ç»‘å®šå›¾ trieæ—¶ï¼Œè¯•å›¾ç”Ÿæˆä¸€ä¸ªç¼ºå¤±çš„ä¾èµ–æ€§ç»‘å®šã€‚ ä½ å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç ä»£æ›¿ <code>generate()</code>ã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">@Provides</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;T&gt; Optional&lt;T&gt; pastry(@io.activej.di.annotation.Optional T instance) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Optional.ofNullable(instance) ã€‚</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>ç°åœ¨ä½ å¯ä»¥åˆ›å»º <em>cookbook</em> <em>injector</em> ï¼Œå¹¶è·å¾—ä¸€ä¸ª <strong>Cookie&lt;Pastry&gt;</strong>çš„å®ä¾‹ã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">Injector injector = Injector.of(cookbook);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(injector.getInstance(new Key&lt;Cookie&lt;Pastry&gt;&gt;() {}).getPastry().orElseThrow(AssertionError::new).getButter().getName());</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>ä½ å¯ä»¥åœ¨ä»¥ä¸‹ç½‘ç«™ä¸Šæ‰¾åˆ°å®ä¾‹æ¥æº <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/inject-2/src/main/java/BindingGeneratorExample.java" target="_blank">GitHub</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="æš‚æ—¶æ€§çš„æ†ç»‘"></a>æš‚æ—¶æ€§çš„æ†ç»‘<a class="hash-link" href="#æš‚æ—¶æ€§çš„æ†ç»‘" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">#</a></h2><p>å¦‚æœä½ éœ€è¦ä¸€ä¸ªéå•ä½“å¯¹è±¡ï¼Œä»¥ä¾¿æ¯ä¸ªç»‘å®šéƒ½æ”¶åˆ°è‡ªå·±çš„å®ä¾‹ï¼Œä½ åº”è¯¥ä½¿ç”¨ <strong>Transient Bindings</strong>ã€‚ åªéœ€æ·»åŠ ä¸€ä¸ª <a href="https://github.com/activej/activej/blob/v5.0-beta2/core-inject/src/main/java/io/activej/inject/annotation/Transient.java" target="_blank">@Transient</a> æ³¨é‡Šã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">Injector injector = Injector.of(cookbook);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(injector.getInstance(new Key&lt;Cookie&lt;Pastry&gt;&gt;() {}).getPastry().orElseThrow(AssertionError::new).getButter().getName());</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>åœ¨åˆ›å»ºäº†ä¸€ä¸ª <strong>Injector</strong> çš„ <em>cookbook</em>ï¼Œæ¯æ¬¡ä½¿ç”¨ <code>injector.getInstance</code>ï¼Œéƒ½ä¼šå¾—åˆ°ä¸€ä¸ªæ–°çš„ non-singleton <strong>Integer</strong> instanceã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">Injector injector = Injector.of(cookbook);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Integer someInt = injector.getInstance(Integer.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Integer otherInt = injector.getInstance(Integer.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(&quot;First : &quot; + someInt + &quot;, second  : &quot; + otherInt);</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>è¾“å‡ºå°†è¯´æ˜æ‰€åˆ›å»ºçš„å®ä¾‹æ˜¯ä¸åŒçš„ï¼Œçœ‹èµ·æ¥ä¼šæ˜¯è¿™æ ·çš„ã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">ç¬¬ä¸€ä¸ªï¼š699ï¼Œç¬¬äºŒä¸ªï¼š130</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>ä½ å¯ä»¥åœ¨ä»¥ä¸‹ç½‘ç«™ä¸Šæ‰¾åˆ°å®ä¾‹æ¥æº <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/inject-2/src/main/java/TransientBindingExample.java" target="_blank">GitHub</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="activejä¸“ç”¨ç¨‹åºä¼˜åŒ–"></a>ActiveJä¸“ç”¨ç¨‹åºä¼˜åŒ–<a class="hash-link" href="#activejä¸“ç”¨ç¨‹åºä¼˜åŒ–" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">#</a></h2><p><a href="/zh/specializer"><strong>ActiveJ Specializer</strong></a> æ˜¯ä¸€ä¸ªä¸ºJVMä¼˜åŒ–ä»£ç çš„åº“ã€‚ ä½ å¯ä»¥ç®€å•åœ°å°† å®ƒä¸ActiveJ Injectç»“åˆèµ·æ¥ï¼Œå¹¶é€šè¿‡ <a href="https://github.com/activej/activej/blob/v5.0-beta2/benchmarks/inject/src/main/java/io/activej/inject/ActiveJDirectScopebindBenchmark.java" target="_blank">up to 30%</a> ä¸ºäº†è®¾ç½®ActiveJ Specializerï¼Œåªéœ€åœ¨ <code>Injector.useSpecializer()</code> åœ¨ <strong>Injector</strong> å®ä¾‹åŒ–ä¹‹å‰ä½¿ç”¨ ã€‚ ActiveJ Injectåœ¨è¿è¡Œæ—¶å°†æ†ç»‘ç‰©ç¼–è¯‘æˆä¸€ä¸ªé«˜æ•ˆçš„è¡¨ç¤ºã€‚ ç»“åˆActiveJ Specializer ï¼Œç»‘å®šå¯ä»¥å˜æˆå­—èŠ‚ç ï¼Œå…¶æ•ˆç‡ä¸äºšäºæ‰‹å·¥ç¼–å†™çš„ä»£ç ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥åœ¨ç°å®ç”Ÿæ´»ä¸­çš„é¡¹ç›®ä¸­è·å¾— ï¼Œè€Œä¸éœ€è¦ç»´æŠ¤éš¾ä»¥æ”¯æŒçš„æ‰‹åŠ¨ä»£ç çš„æœ€ä½³æ€§èƒ½ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="å®ä¾‹æä¾›è€…"></a>å®ä¾‹æä¾›è€…<a class="hash-link" href="#å®ä¾‹æä¾›è€…" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">#</a></h2><a href="https://github.com/activej/activej/blob/v5.0-beta2/core-inject/src/main/java/io/activej/inject/InstanceProvider.java" target="_blank">InstanceProvider</a> æ˜¯ `Injector.getInstance()` çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œæœ‰ä¸€ä¸ªå‡ºç‚‰çš„å¯†é’¥ã€‚ å®ƒå¯ä»¥é€šè¿‡æä¾›è€…çš„æ–¹æ³•æµç•…åœ°è¯·æ±‚ã€‚<p>åœ¨ <strong>AbstractModule</strong> ï¼Œæˆ‘ä»¬æ˜ç¡®åœ°ä¸º <strong>InstanceProvider</strong> ï¼Œä½¿ç”¨ <code>bindInstanceProvider</code> helperæ–¹æ³•ä¸º <strong>Integer</strong> ç»‘å®šï¼Œå¹¶æä¾› <strong>Integer</strong> å·¥å‚å‡½æ•°ã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">AbstractModule cookbook = new AbstractModule() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  protected void configure() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bindInstanceProvider(Integer.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Provides</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  Integer giveMe() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return random.nextInt(1000);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>åœ¨åˆ›å»ºäº†ä¸€ä¸ª <strong>Injector</strong> çš„ <em>cookbook</em>ä¹‹åï¼Œæˆ‘ä»¬å¾—åˆ°äº† <strong>Key&lt;InstanceProvider&lt;Integer&gt;&gt;</strong>çš„å®ä¾‹ã€‚ ç°åœ¨åªéœ€ä½¿ç”¨ <code>provider.get()</code> æ¥è·å¾—ä¸€ä¸ªæ‡’æƒ°çš„ <strong>Integer</strong> å®ä¾‹ã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">Injector injector = Injector.of(cookbook);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">InstanceProvider&lt;Integer&gt; provider = injector.getInstance(new Key&lt;InstanceProvider&lt;Integer&gt;&gt;() {});</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// lazy value get.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Integer someInt = provider.get();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(someInt);</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>ä¸å‰é¢çš„ä¾‹å­ä¸åŒï¼Œå¦‚æœä½ å¤šæ¬¡è°ƒç”¨ <code>provide.get()</code> ï¼Œä½ ä¼šæ”¶åˆ°ç›¸åŒçš„å€¼ã€‚
ä½ å¯ä»¥åœ¨ä»¥ä¸‹ç½‘ç«™ä¸Šæ‰¾åˆ°å®ä¾‹æ¥æº <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/inject-2/src/main/java/InstanceProviderExample.java" target="_blank">GitHub</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="æ£€æŸ¥åˆ›å»ºçš„ä¾èµ–å…³ç³»å›¾"></a>æ£€æŸ¥åˆ›å»ºçš„ä¾èµ–å…³ç³»å›¾<a class="hash-link" href="#æ£€æŸ¥åˆ›å»ºçš„ä¾èµ–å…³ç³»å›¾" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">#</a></h2><p>ActiveJ Injectä¸ºæ£€æŸ¥åˆ›å»ºçš„å®ä¾‹ã€ä½œç”¨åŸŸå’Œä¾èµ–å›¾çš„å¯è§†åŒ–æä¾›æœ‰æ•ˆçš„DSLã€‚ åœ¨è¿™ä¸ªCookieçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åƒå¾€å¸¸ä¸€æ ·ï¼Œåˆ›å»ºäº† <strong>Sugar</strong>, <strong>Butter</strong>, <strong>Flour</strong>, <strong>Pastry</strong> å’Œ <strong>Cookie</strong> POJOs, *cookbook<strong>*AbstractModule</strong> ï¼Œæœ‰ä¸¤ä¸ªä½œç”¨åŸŸï¼ˆ <strong>Cookie</strong> çš„çˆ¶ä½œç”¨åŸŸå’Œ <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/inject-2/src/main/java/OrderScope.java" target="_blank">@OrderScope</a> çš„æˆåˆ†ï¼‰å’Œ cookbook <em>injector</em>ã€‚
é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¦‚è¿°ä¸€ä¸‹ä¸‰ä¸ª <strong>Injector</strong> æ–¹æ³•ï¼š <code>peekInstance</code>ï¼Œ <code>hasInstance</code> å’Œ <code>getInstance</code>ã€‚ å®ƒä»¬å…è®¸æ£€æŸ¥ åˆ›å»ºçš„å®ä¾‹ã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">Cookie cookie1 = injector.peekInstance(Cookie.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(&quot;Instance is present in injector before &#x27;get&#x27; : &quot; + injector.hasInstance(Cookie.class));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(&quot;Instance before get : &quot; + cookie1);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Cookie cookie = injector.getInstance(Cookie.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Cookie cookie2 = injector.peekInstance(Cookie.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(&quot;Instance is present in injector after &#x27;get&#x27; : &quot; + injector.hasInstance(Cookie.class));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(&quot;Instance after get : &quot; + cookie2);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println();    /// created instance check.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(&quot;Instances are same : &quot; + cookie.equals(cookie2));</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><ul><li><code>peekInstance</code> - è¿”å›ä¸€ä¸ªå®ä¾‹ <strong>ï¼Œåªæœ‰åœ¨å®ƒå·²ç»è¢« <code>getInstance</code> è°ƒç”¨ä¹‹å‰åˆ›å»ºçš„æƒ…å†µä¸‹</strong>ã€‚</li><li><code>hasInstance</code> - æ£€æŸ¥åœ¨è°ƒç”¨ <code>getInstance</code> ä¹‹å‰ï¼Œæ˜¯å¦å·²ç»åˆ›å»ºäº†æ‰€æä¾›çš„ <em>key</em> çš„å®ä¾‹ã€‚</li><li><code>getInstance</code> - è¿”å›ä¸€ä¸ªæ‰€æä¾›çš„ <em>é”®çš„å®ä¾‹ã€‚</em>
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä½œç”¨åŸŸæ£€æŸ¥çš„å·¥å…·ã€‚</li></ul><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">final Scope ORDER_SCOPE = Scope.of(OrderScope.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(&quot;Parent injector, before entering scope : &quot; + injector);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Injector subInjector = injector.enterScope(ORDER_SCOPE);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(&quot;Parent injector, after entering scope : &quot; + subInjector.getParent());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(&quot;Parent injector is &#x27;injector&#x27; : &quot; + injector.equals(subInjector.getParent()));</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">System.out.println(&quot;Pastry binding check : &quot; + subInjector.getBinding(Pastry.class));</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><ul><li><code>getParent</code> - è¿”å›å½“å‰ä½œç”¨åŸŸçš„çˆ¶ä½œç”¨åŸŸ</li><li><code>getBinding</code> - è¿”å›æ‰€æä¾›çš„ç»‘å®šçš„ä¾èµ–æ€§</li><li><code>getBindings</code> - è¿”å›æ‰€æä¾›èŒƒå›´çš„ä¾èµ–æ€§ï¼ˆåŒ…æ‹¬ <strong>Injector</strong>ï¼‰ã€‚</li></ul><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">Utils.printGraphVizGraph(subInjector.getBindingsTrie());</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>ä½ ä¼šæ”¶åˆ°ä»¥ä¸‹è¾“å‡ºã€‚</p><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W bash"><pre tabindex="0" class="prism-code language-bash codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">digraph </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">rankdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">BT</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Flour</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">æ ‡ç­¾</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Flour</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Sugar</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">æ ‡ç­¾</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Sugar</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">ã€‚</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Butter</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Butter</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Cookie</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Cookie</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;()-&gt;Io.activej.di.core.Injector&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Injector&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Pastry</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">label</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Pastry</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">rank</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">same</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Flour</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Sugar</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Butter</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;()-&gt;Io.activej.di.core.Injector&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Cookie</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Pastry</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> ï¼›</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Pastry</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Butter</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> ã€‚</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Pastry</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Flour</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Pastry</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;()-&gt;DiDependencyGraphExplore</span><span class="token string variable" style="color:#36acaa">$Sugar</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>è¿™å¯ä»¥è½¬åŒ–ä¸ºä»¥ä¸‹å›¾è¡¨ã€‚</p><div class="mermaid">
graph BT
    DiDependencyGraphExplore$Cookie --&gt; id1(DiDependencyGraphExplore$Pastry)
    id1 --&gt; DiDependencyGraphExplore$Flour
    id1 --&gt; DiDependencyGraphExplore$Sugar
    id1 --&gt; DiDependencyGraphExplore$Butter
    Injector
</div><p>ä½ å¯ä»¥åœ¨ä»¥ä¸‹ç½‘ç«™ä¸Šæ‰¾åˆ°å®ä¾‹æ¥æº <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/inject-2/src/main/java/DiDependencyGraphExplore.java" target="_blank">GitHub</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="å¯é€‰çš„å‘ç”µæœºæ¨¡å—"></a>å¯é€‰çš„å‘ç”µæœºæ¨¡å—<a class="hash-link" href="#å¯é€‰çš„å‘ç”µæœºæ¨¡å—" title="ç›´æ¥é“¾æ¥åˆ°æ ‡é¢˜">#</a></h2><p><strong><a href="https://github.com/activej/activej/blob/v5.0-beta2/core-inject/src/main/java/io/activej/inject/module/OptionalGeneratorModule.java" target="_blank">OptionalGeneratorModule</a></strong> å·¥ä½œæ–¹å¼ä¸ä¹‹å‰çš„ç”Ÿæˆå™¨æ¨¡å—ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ <strong>OptionalGeneratorModule</strong> ï¼Œè´Ÿè´£åˆ›å»º <strong>Optional</strong> å¯¹è±¡ã€‚</p><ul><li>åœ¨ä¸‹ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸€ä¸ª <code>å¯é€‰&lt;String&gt;</code>çš„å®ä¾‹ã€‚</li><li>åˆ›ä½œçš„é…æ–¹æ”¾åœ¨ <em>æ¨¡å—å†…</em>ã€‚</li><li><code>install()</code> å»ºç«‹ <strong>OptionalGeneratorModule</strong> ä»¥ä¾¿è¿›ä¸€æ­¥è‡ªåŠ¨åˆ›å»º <strong>Optional</strong> å¯¹è±¡ã€‚</li><li>ç„¶åæˆ‘ä»¬åªéœ€ <em>ç»‘å®š</em> <em>å­—ç¬¦ä¸²</em> é…æ–¹ï¼Œå¹¶åœ¨ä¸‹ä¸€è¡ŒæŒ‡å®šç»‘å®šï¼Œä¸ºé”® <code>å¯é€‰&lt;String&gt;</code>æ„å»ºä¸€ä¸ªå®ä¾‹ ã€‚</li><li>æœ€ç»ˆï¼Œæˆ‘ä»¬åªæ˜¯åˆ›å»ºäº†ä¸€ä¸ª <code>æ¨¡å—</code>çš„æ³¨å…¥å™¨ï¼Œè¦æ±‚å®ƒè·å¾— <code>çš„å®ä¾‹ï¼Œå¯é€‰&lt;String&gt;</code> å¹¶æ¥æ”¶ <code>&quot;Hello, World&quot;</code>ã€‚</li></ul><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#393A34"><span class="token plain">public class OptionalGeneratorModuleExample {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public static void main(String[] args) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Injector injector = Injector.of(ModuleBuilder.create()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .install(OptionalGeneratorModule.create())</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .bind(String.class).toInstance(&quot;Hello, World&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .bind(new Key&lt;Optional&lt;String&gt;&gt;() {})</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Optional&lt;String&gt; instance = injector.getInstance(new Key&lt;Optional&lt;String&gt;&gt;() {});</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    System.out.println(instance);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" class="copyButton_2e3i clean-btn">æ‹·è´</button></div></div><p>ä½ å¯ä»¥åœ¨ä»¥ä¸‹ç½‘ç«™ä¸Šæ‰¾åˆ°å®ä¾‹æ¥æº <a href="https://github.com/activej/activej/blob/examples-5.0-beta2/examples/core/inject-2/src/main/java/OptionalGeneratorModuleExample.java" target="_blank">GitHub</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£é¡µé¢å¯¼èˆª"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh/inject/basic"><div class="pagination-nav__sublabel">ä¸Šä¸€ç¯‡</div><div class="pagination-nav__label">Â« åŸºæœ¬</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh/inject/benchmarks"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">åŸºå‡† Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#di-å¤šç”¨é€”å¤¹å­" class="table-of-contents__link">DI å¤šç”¨é€”å¤¹å­</a></li><li><a href="#å®ä¾‹æ³¨å…¥å™¨" class="table-of-contents__link">å®ä¾‹æ³¨å…¥å™¨</a></li><li><a href="#ç»‘å®šç”Ÿæˆå™¨" class="table-of-contents__link">ç»‘å®šç”Ÿæˆå™¨</a></li><li><a href="#æš‚æ—¶æ€§çš„æ†ç»‘" class="table-of-contents__link">æš‚æ—¶æ€§çš„æ†ç»‘</a></li><li><a href="#activejä¸“ç”¨ç¨‹åºä¼˜åŒ–" class="table-of-contents__link">ActiveJä¸“ç”¨ç¨‹åºä¼˜åŒ–</a></li><li><a href="#å®ä¾‹æä¾›è€…" class="table-of-contents__link">å®ä¾‹æä¾›è€…</a></li><li><a href="#æ£€æŸ¥åˆ›å»ºçš„ä¾èµ–å…³ç³»å›¾" class="table-of-contents__link">æ£€æŸ¥åˆ›å»ºçš„ä¾èµ–å…³ç³»å›¾</a></li><li><a href="#å¯é€‰çš„å‘ç”µæœºæ¨¡å—" class="table-of-contents__link">å¯é€‰çš„å‘ç”µæœºæ¨¡å—</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021å¹´ ActiveJ LLC.ä¿ç•™æ‰€æœ‰æƒåˆ©</div></div></div></footer></div>
<script src="/zh/assets/js/runtime~main.1dae9580.js"></script>
<script src="/zh/assets/js/main.421114b9.js"></script>
</body>
</html>